/**
 * spl2sql - Convert Splunk SPL to ClickHouse SQL with pegjs
 * @version v0.0.5
 * @author wangfucheng <wangfucheng@machloop.com>
 * @buildAt 2022-05-26T06:12:02.918Z
 */
 function _slicedToArray(t,r){return _arrayWithHoles(t)||_iterableToArrayLimit(t,r)||_unsupportedIterableToArray(t,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function _iterableToArrayLimit(t,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var e=[],n=!0,o=!1,a=void 0;try{for(var c,i=t[Symbol.iterator]();!(n=(c=i.next()).done)&&(e.push(c.value),!r||e.length!==r);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return e}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}(function(t,r){"function"==typeof define&&define.amd?define([],r):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=r():t.splToSqlConverter=r()})(this,function(){"use strict";function yo(t,r,e,n){this.message=t,this.expected=r,this.found=e,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,yo)}function t(){this.constructor=r}var r,e;return r=yo,e=Error,t.prototype=e.prototype,r.prototype=new t,yo.buildMessage=function(t,r){var e,a={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){for(var r="",e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?c(t.parts[e][0])+"-"+c(t.parts[e][1]):c(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function c(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}return"Expected "+function(t){for(var r,e,n=new Array(t.length),o=0;o<t.length;o++)n[o]=(e=t[o],a[e.type](e));if(n.sort(),0<n.length){for(r=o=1;o<n.length;o++)n[o-1]!==n[o]&&(n[r]=n[o],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+((e=r)?'"'+o(e)+'"':"end of input")+" found."},{SyntaxError:yo,parse:function(h,t){var v={},r={start:An},e=An,u=sn("SplExpression"),f=function(t,r){var e,n,o,a,c=_slicedToArray(t,2),i=(c[0],c[1]),u="",f={WHERE:i};r.forEach(function(t){t&&t[3]&&(f=Object.assign(f,t[3]))}),i&&(u+=i),f.GENTIMES&&(e=(n=f.GENTIMES).time_field,a=n.time_from,o=n.time_to,t=uo(a),c=uo(o),r=po?">=":">",n=Io?"<=":"<",o=uo(a-Qn),a="",vo?(a+="(",a+=" start_time >= toDateTime64(:param_aging_start_time, ".concat(Ao,", 'UTC') "),a+=" and start_time < toDateTime64(:param_end_time, ".concat(Ao,", 'UTC') "),a+=" and end_time >= toDateTime64(:param_start_time, ".concat(Ao,", 'UTC') "),a+=")",oo.param_aging_start_time=o):a+="(`"+e+"`"+"".concat(r," toDateTime64(:param_start_time, ").concat(Ao,", 'UTC') AND ")+"`"+e+"`"+" ".concat(n," toDateTime64(:param_end_time, ").concat(Ao,", 'UTC'))"),f.WHERE=u+=i?" AND ".concat(a):a,oo.param_start_time=t,oo.param_end_time=c),f.ORDER_BY&&(u+=" "+f.ORDER_BY),f.LIMIT&&(u+=" "+f.LIMIT);u={source:an(),target:u,params:oo,dev:{expression:f,fields:eo,fieldCollection:Object.keys(no).map(function(t){return no[t]})}};return ho?{result:u}:{result:JSON.stringify(u)}},s=sn("SourceAndSearchExpression"),l=function(t,r){return r&&r[1]&&0!==r.length?["",r[1]]:["",""]},d=sn("SearchExpression"),A=function(t){return t?"("+t+")":""},c=sn("RegionOr"),i=function(t,r){return t+" OR "+r},p=sn("RegionAnd"),I=function(t,r){return t+" AND "+r},a=sn("FactorBlock"),y=function(t){return"("+t+")"},m=sn("BasicCondition"),C=function(t,r,e){var n=t.fieldName,o=t.fieldType,a="<="===r?"<=":"<"===r?"<":">="===r?">=":">"===r?">":"!="===r?"!=":"="===r?"=":"",c=fo(n,o),i=c.paramKey,u=c.paramName;if(o&&-1<o.indexOf("Array")&&"="!==a)throw Error("数组类型的字段只支持 = 搜索");if("Array"===o){var f=e.split(",").filter(function(t){return t});if(2<=f.length){var s=[];return f.forEach(function(t,r){r=i+"_"+r;so(r,t),s.push(r)})," hasAll(".concat(n,", [").concat(s.join(",")," ])=1")}}t="IPv4"===o&&co(e,"IPv4"),r="IPv6"===o&&co(e,"IPv6");if("IP"===o){var l=to.test(e)||ro.test(e);if(co(e,"IPv4")||co(e,"IPv6")){var c=_slicedToArray(e.split("/"),2),f=c[0],d=c[1],c="!="===a?"NOT":"";return to.test(f)&&(f="::ffff:".concat(f),d=parseInt(d,10)+96),"".concat(n," ").concat(c," between IPv6CIDRToRange(toIPv6('").concat(f,"'), ").concat(d,").1 and IPv6CIDRToRange(toIPv6('").concat(f,"'), ").concat(d,").2")}if(l)return"".concat(n," ").concat(a," toIPv6(").concat(e,")");throw Error("请输入一个ip或者ip段")}if(t||r){if("="!==a&&"!="!==a)throw Error("CIDR格式的IP地址只支持等于或不等于搜索");var h=cn(),v=h.start,d=h.end,l=qn+v.line+"_"+v.offset+"_"+d.line+"_"+d.offset,t=_slicedToArray(e.split("/"),2),r=t[0],h=t[1],v="",d="".concat(l,"_ip"),t="".concat(l,"_mask"),l="!="===a?"NOT":"";return"IPv4"===o&&(lo(n,"CIDR_IPv4",a,e),v="".concat(n," ").concat(l," between IPv4CIDRToRange(toIPv4(").concat(d,"), ").concat(t,").1 and IPv4CIDRToRange(toIPv4(").concat(d,"), ").concat(t,").2")),"IPv6"===o&&(lo(n,"CIDR_IPv6",a,e),v="".concat(n," ").concat(l," between IPv6CIDRToRange(toIPv6(").concat(d,"), ").concat(t,").1 and IPv6CIDRToRange(toIPv6(").concat(d,"), ").concat(t,").2")),l&&(v="((".concat(v,") or isNull(").concat(n,"))")),so(d,r),so(t,+h),v}if("Array<CIDR_IPv4>"===o||"Array<CIDR_IPv6>"===o){if("="!==a)throw Error("Array<CIDR_IPv4> 或 Array<CIDR_IPv6> 格式的IP地址只支持等于搜索");if(!to.test(e)&&!ro.test(e))throw Error("".concat(e,"不是个正确的IP地址"));h=cn(),v=h.start,h=h.end,v=qn+v.line+"_"+v.offset+"_"+h.line+"_"+h.offset,h="".concat(v,"_ip"),v="";return"Array<CIDR_IPv4>"===o&&(v="notEmpty(arrayFilter(y -> (toIPv4(".concat(h,") BETWEEN y.1 AND y.2), arrayMap(x -> (IPv4CIDRToRange(toIPv4(splitByChar('/', x)[1]), toUInt8(splitByChar('/', x)[2]))), ").concat(n,")))")),"Array<CIDR_IPv6>"===o&&(v="notEmpty(arrayFilter(y -> (toIPv6(".concat(h,") BETWEEN y.1 AND y.2), arrayMap(x -> (IPv6CIDRToRange(toIPv6(splitByChar('/', x)[1]), toUInt8(splitByChar('/', x)[2]))), ").concat(n,")))")),lo(n,o,a,e),so(h,e),v}if(a){if("IPv4"===o&&!to.test(e)&&!co(e,"IPv4"))throw Error("".concat(e,"不是个正确的IPv4"));if("Array<IPv4>"===o&&!to.test(e))throw Error("".concat(e,"不是个正确的IPv4"));if("IPv6"===o&&!ro.test(e)&&!co(e,"IPv6")&&!co(e,"IPv4"))throw Error("".concat(e,"不是个正确的IPv6"));if("Array<IPv6>"===o&&!ro.test(e))throw Error("".concat(e,"不是个正确的IPv6"));if(lo(n,o,a,e),so(i,e),-1<o.indexOf("Array"))return" "+u;if("Map"!==o)return"!="===a?"((`"+n+"`"+a+u+") or isNull("+n+"))":"`"+n+"`"+a+u;o=_slicedToArray(n.split("."),2),n=o[0],o=o[1];return"".concat(n,"['").concat(o,"'] ").concat(a," ").concat(u)}return""},g=sn("InCondition"),T=function(t,r){var e=t.fieldName,n=t.fieldType,t=fo(e,n),o=t.paramKey,t=t.paramName;if("IPv4"===n||"IPv6"===n){var a=[];return r.forEach(function(t,r){r=o+"_"+r;if(so(r,t),"IPv4"===n){if(!to.test(t))throw Error("".concat(t,"不是个正确的IPv4"));a.push("toIPv4(".concat(r,")"))}else{if(!ro.test(t))throw Error("".concat(t,"不是个正确的IPv6"));a.push("toIPv6(".concat(r,")"))}}),"`"+e+"` IN ("+a.join(",")+")"}if("Array"!==n&&"Array<IPv4>"!==n&&"Array<IPv6>"!==n)return so(o,r),"`"+e+"` IN ("+t+")";var c=[];return r.forEach(function(t,r){r=o+"_"+r;if(so(r,t),"Array<IPv4>"===n){if(!to.test(t))throw Error("".concat(t,"不是个正确的IPv4"));c.push("toIPv4(".concat(r,")"))}else if("Array<IPv6>"===n){if(!ro.test(t))throw Error("".concat(t,"不是个正确的IPv6"));c.push("toIPv6(".concat(r,")"))}else c.push(r)})," hasAny(`"+e+"`, ["+c.join(",")+"])=1"},P=sn("NotInCondition"),E=function(t,r){var e=t.fieldName,n=t.fieldType,t=fo(e,n),o=t.paramKey,t=t.paramName;if("IPv4"===n||"IPv6"===n){var a=[];return r.forEach(function(t,r){r=o+"_"+r;if(so(r,t),"IPv4"===n){if(!to.test(t))throw Error("".concat(t,"不是个正确的IPv4"));a.push("toIPv4(".concat(r,")"))}else{if(!ro.test(t))throw Error("".concat(t,"不是个正确的IPv6"));a.push("toIPv6(".concat(r,")"))}}),"`"+e+"` NOT IN ("+a.join(",")+")"}if("Array"!==n&&"Array<IPv4>"!==n&&"Array<IPv6>"!==n)return so(o,r),"`"+e+"` NOT IN ("+t+")";var c=[];return r.forEach(function(t,r){r=o+"_"+r;if(so(r,t),"Array<IPv4>"===n){if(!to.test(t))throw Error("".concat(t,"不是个正确的IPv4"));c.push("toIPv4(".concat(r,")"))}else if("Array<IPv6>"===n){if(!ro.test(t))throw Error("".concat(t,"不是个正确的IPv6"));c.push("toIPv6(".concat(r,")"))}else c.push(r)})," hasAny(`"+e+"`, ["+c.join(",")+"])=0"},o=sn("MultipleValue"),_=function(t,r){r=[t].concat(r);return r.filter(function(t,r,e){return e.indexOf(t)===r})},n=sn("MoreMultipleValues"),b=",",w=un(",",!1),S=function(t){return t},D=sn("LikeCondition"),N=function(t,r){var e=t.fieldName,n=t.fieldType;if(n&&-1<n.indexOf("IP"))throw Error("IP类型的字段不支持LIKE");var o=fo(e,n),t=o.paramKey,o=o.paramName;if(so(t,"%".concat(r,"%")),"Array"===n)return" notEmpty(arrayFilter(x -> x ILIKE "+t+",`"+e+"`))";if(lo(e,n,"like",r),"Map"!==n)return"`"+e+"` ILIKE "+o;n=_slicedToArray(e.split("."),2),e=n[0],n=n[1];return" ".concat(e,"['").concat(n,"'] ILIKE ").concat(o)},R=sn("NotLikeCondition"),x=function(t,r){var e=t.fieldName,n=t.fieldType;if(-1<n.indexOf("IP"))throw Error("IP类型的字段不支持 NOT LIKE");var o=fo(e,n),t=o.paramKey,o=o.paramName;if(so(t,"%".concat(r,"%")),"Array"===n)return" notEmpty(arrayFilter(x -> x NOT ILIKE "+t+",`"+e+"`))";if(lo(e,n,"not_like",r),"Map"!==n)return"`"+e+"` NOT ILIKE "+o;n=_slicedToArray(e.split("."),2),e=n[0],n=n[1];return" ".concat(e,"['").concat(n,"'] NOT ILIKE ").concat(o)},F=sn("ExistsCondition"),O=function(t){var r=t.fieldName;t.fieldType;return"not empty(`"+r+"`)"},M=sn("NotExistsCondition"),L=function(t){var r=t.fieldName;t.fieldType;return"empty(`"+r+"`)"},j=sn("TailCommand"),H=sn("FieldsCommand"),U=function(t,r){var r=[t].concat(r),e=[],n=[];return r.forEach(function(t){var r=t.op,t=t.field;"+"===r&&e.push(t),"-"===r&&n.push(t)}),{COLUMNS:e.map(function(t){return"`"+t+"`"}).join(",")}},Y=sn("Column"),K=function(t,r){return{op:t||"+",field:r}},Z=sn("MoreColumns"),z=function(t){return t},k=sn("HeadCommand"),B=function(t){if(t<=0)throw Error("返回结果的数量至少为1");return{LIMIT:"LIMIT 0,"+t}},G=sn("SortCommand"),W=function(t,r,e){return{ORDER_BY:"ORDER BY "+[[t,r]].concat(e).map(function(t){var r=_slicedToArray(t,2),t=r[0];return r[1]+" "+(t&&t!==Xn?"DESC":"ASC")})}},V=sn("MoreSort"),$=function(t,r){return[t,r]},X=sn("GentimesCommand"),q="start",J=un("start",!0),Q="end",tt=un("end",!0),rt=function(t,r,e){var n=ao;return 0<e.length&&(n=e[0][5]),{GENTIMES:{time_field:t,time_from:r,time_to:n}}},et=sn("TimeValue"),nt='"',ot=un('"',!1),at=function(t){return t},ct="'",it=un("'",!1),ut=sn("RelativeTime"),ft="now-",st=un("now-",!1),lt=function(t,r){var e=new Date(ao);return"y"===r&&(e=e.setFullYear(e.getFullYear()-t)),"M"===r&&(e=e.setMonth(e.getMonth()-t)),"w"===r&&(e=e.setDate(e.getDate()-7*t)),"d"===r&&(e=e.setDate(e.getDate()-t)),"h"!==r&&"H"!==r||(e=e.setHours(e.getHours()-t)),"m"===r&&(e=e.setMinutes(e.getMinutes()-t)),"s"===r&&(e=e.setSeconds(e.getSeconds()-t)),new Date(e).getTime()},dt=sn("now"),ht="now",vt=un("now",!1),At=function(){return ao},pt=sn("TimeUnit"),It="y",yt=un("y",!1),mt="M",Ct=un("M",!1),gt="w",Tt=un("w",!1),Pt="d",Et=un("d",!1),_t="h",bt=un("h",!1),wt="H",St=un("H",!1),Dt="m",Nt=un("m",!1),Rt="s",xt=un("s",!1),Ft=an,Ot=sn("Timestamp"),Mt=function(t){if(13!==String(t).length)throw Error("请输入毫秒级的时间戳");return t},Lt=sn("UTCTime"),jt="-",Ht=un("-",!1),Ut="T",Yt=un("T",!1),Kt=":",Zt=un(":",!1),zt=function(t,r,e,n,o,a,c){if(4!==String(t).length||2!==String(r).length||2!==String(e).length||2!==String(n).length||2!==String(o).length||2!==String(a).length)throw Error("时间格式错误。时间格式：YYYY-MM-DDTHH:mm:ssZ");e="";if(c){n=_slicedToArray(c,3),o=n[0],a=n[1],c=n[2],n=parseInt(a);if(12<n||n<-12)throw Error("错误的时区范围");if(c&&c.length<2||c&&2===c.length&&("0"!==c[0]||"0"!==c[1])||n<10&&("0"!==a.charAt(0)||"0"===a.charAt(0)&&2!==a.length))throw Error("时区格式错误. 未能解析日期字段 [".concat(an(),"], 请输入 [").concat(o,"0").concat(n,"] 或 [").concat(o,"0").concat(n,":00]"));e=0===c.length?"".concat(an(),":00"):an()}else e="".concat(an(),"+08:00");return new Date(e).getTime()},kt=sn("YYYYMMDDHHmmss"),Bt=function(t,r,e,n,o,a){if(4!==String(t).length||2!==String(r).length||2!==String(e).length||2!==String(n).length||2!==String(o).length||2!==String(a).length)throw Error("时间格式错误。时间格式：YYYY-MM-DD HH:mm:ss");return new Date(an().replace(/ /,"T")+(o=(new Date).getTimezoneOffset(),a=0<o?"-":"+",o=Math.abs(o)/60,"".concat(a).concat(io(o),":00"))).getTime()},Gt=sn("TimeInteger"),Wt=/^[0-9]/,Vt=fn([["0","9"]],!1,!1),$t=function(t){return t.join("")},Xt=sn("TimeZone"),qt="+",Jt=un("+",!1),Qt="00",tr=un("00",!1),rr=":00",er=un(":00",!1),nr=function(t,r,e){r=r.join("");return e=e||r.slice(2,4),[t,r.slice(0,2),e]},or=/^[ \t\r\n]/,ar=fn([" ","\t","\r","\n"],!1,!1),cr=/^[ ]/,ir=fn([" "],!1,!1),ur=sn("DataSource"),fr=/^[a-zA-Z0-9._\-*]/,sr=fn([["a","z"],["A","Z"],["0","9"],".","_","-","*"],!1,!1),lr=sn("Field"),dr=/^[A-Za-z0-9_.]/,hr=fn([["A","Z"],["a","z"],["0","9"],"_","."],!1,!1),vr=function(t){t=t.join("");return-1===eo.indexOf(t)&&-1===["fields","FIELDS","sort","SORT","gentimes","GENTIMES","head","HEAD"].indexOf(t)&&eo.push(t),t},Ar=sn("FieldWithType"),pr=function(t,r){var e=t.join(""),t=e+(r?"<"+r+">":"");return-1===eo.indexOf(t)&&-1===["fields","FIELDS","sort","SORT","gentimes","GENTIMES","head","HEAD"].indexOf(e)&&eo.push(t),{fieldName:e,fieldType:r||""}},Ir=sn("FieldType"),yr="<",mr=un("<",!1),Cr=/^[A-Za-z0-9]/,gr=fn([["A","Z"],["a","z"],["0","9"]],!1,!1),Tr=">",Pr=un(">",!1),Er=function(t,r){t=t.join("");if(-1===["IP","IPv4","IPv6","Array","Map"].indexOf(t))throw Error("字段类型只能是".concat(Jn.join("、")));return t+(r?"<".concat(r,">"):"")},_r=sn("FieldSecondType"),br=/^[A-Za-z0-9_]/,wr=fn([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Sr=function(t){t=t.join("");if(-1===["IPv4","IPv6","CIDR_IPv4","CIDR_IPv6"].indexOf(t))throw Error("字段类型只能是".concat(Jn.join("、")));return t},Dr=sn("DefaultValue"),Nr=/^[\u4E00-\u9FA5_a-zA-Z0-9a-zA-Z0-9~\xB7!@#$%\^&*_\-+={}[\]\\<>,.?\/:;\uFF01\uFFE5\uFF1B\uFF1A\uFF0C\u3002]/,Rr=fn([["一","龥"],"_",["a","z"],["A","Z"],["0","9"],["a","z"],["A","Z"],["0","9"],"~","·","!","@","#","$","%","^","&","*","_","-","+","=","{","}","[","]","\\","<",">",",",".","?","/",":",";","！","￥","；","：","，","。"],!1,!1),xr=function(t){return!isNaN(Number(t))?Number(t):t},Fr=(sn("QuotedValue"),fn([["一","龥"],"_",["a","z"],["A","Z"],["0","9"],["a","z"],["A","Z"],["0","9"],"~","·","!","@","#","$","%","^","&","*","(",")","_","-","+","=","{","}","[","]","\\","<",">",",",".","?","/",":",";","！","￥","；","：","，","。"," "],!1,!1),sn("Value")),Or=function(t){return t.join("")},Mr="\\",Lr=un("\\",!1),jr={type:"any"},Hr=function(t){return t},Ur=function(t){return t},Yr="b",Kr=un("b",!1),Zr=function(){return"\b"},zr="f",kr=un("f",!1),Br=function(){return"\f"},Gr="n",Wr=un("n",!1),Vr=function(){return"\n"},$r="r",Xr=un("r",!1),qr=function(){return"\r"},Jr="t",Qr=un("t",!1),te=function(){return"\t"},re="v",ee=un("v",!1),ne=function(){return"\v"},oe=function(t){return parseInt(t.join(""))},ae="and",ce=un("AND",!0),ie="&&",ue=un("&&",!1),fe=function(){return Vn},se="or",le=un("OR",!0),de="||",he=un("||",!1),ve=function(){return $n},Ae=(un("true",!1),un("false",!1),"|"),pe=un("|",!1),Ie="=",ye=un("=",!1),me="!=",Ce=un("!=",!1),ge=">=",Te=un(">=",!1),Pe="<=",Ee=un("<=",!1),_e="(",be=un("(",!1),we=")",Se=un(")",!1),De="source",Ne=un("SOURCE",!0),Re="search",xe=un("SEARCH",!0),Fe="fields",Oe=un("FIELDS",!0),Me="head",Le=un("HEAD",!0),je="sort",He=un("SORT",!0),Ue="gentimes",Ye=un("GENTIMES",!0),Ke=(un("SIZE",!0),un("TIMEOUT",!0),un("TRACK_TOTAL_HITS",!0),un("TERMINATE_AFTER",!0),un("TOP",!0),un("LIMIT",!0),"in"),Ze=un("IN",!0),ze="not in",ke=un("NOT IN",!0),Be="like",Ge=un("LIKE",!0),We="not like",Ve=un("NOT LIKE",!0),$e="exists",Xe=un("EXISTS",!0),qe="not_exists",Je=un("NOT_EXISTS",!0),Qe=0,tn=0,rn=[{line:1,column:1}],en=0,nn=[],on=0;if("startRule"in(t=void 0!==t?t:{})){if(!(t.startRule in r))throw new Error("Can't start parsing from rule \""+t.startRule+'".');e=r[t.startRule]}function an(){return h.substring(tn,Qe)}function cn(){return dn(tn,Qe)}function un(t,r){return{type:"literal",text:t,ignoreCase:r}}function fn(t,r,e){return{type:"class",parts:t,inverted:r,ignoreCase:e}}function sn(t){return{type:"other",description:t}}function ln(t){var r,e=rn[t];if(e)return e;for(r=t-1;!rn[r];)r--;for(e={line:(e=rn[r]).line,column:e.column};r<t;)10===h.charCodeAt(r)?(e.line++,e.column=1):e.column++,r++;return rn[t]=e}function dn(t,r){var e=ln(t),n=ln(r);return{start:{offset:t,line:e.line,column:e.column},end:{offset:r,line:n.line,column:n.column}}}function hn(t){Qe<en||(en<Qe&&(en=Qe,nn=[]),nn.push(t))}function vn(t,r,e){return new yo(yo.buildMessage(t,r),t,r,e)}function An(){return function(){var t,r,e,n,o,a,c,i;if(on++,t=Qe,(r=function(){var t,r,e,n,o,a,c;on++,r=t=Qe,r=(e=function(){var t;h.substr(Qe,6).toLowerCase()===De?(t=h.substr(Qe,6),Qe+=6):(t=v,0===on&&hn(Ne));return t}())!==v?(n=Fn(),n!==v?(o=zn())!==v?(a=Fn())!==v?(c=function(){var t,r,e;on++,t=Qe,r=[],fr.test(h.charAt(Qe))?(e=h.charAt(Qe),Qe++):(e=v,0===on&&hn(sr));if(e!==v)for(;e!==v;)r.push(e),fr.test(h.charAt(Qe))?(e=h.charAt(Qe),Qe++):(e=v,0===on&&hn(sr));else r=v;t=r!==v?h.substring(t,Qe):r;on--,t===v&&(r=v,0===on&&hn(ur));return t}())!==v?e=[e,n,o,a,c]:(Qe=r,v):(Qe=r,v):(Qe=r,v):(Qe=r,v)):(Qe=r,v);r===v&&(r=null);t=r!==v?(e=Qe,n=Fn(),(e=n!==v?(o=function(){var t,r,e,n,o,a;on++,r=t=Qe,r=(e=Zn())!==v?(n=Fn(),n!==v?(o=function(){var t;h.substr(Qe,6).toLowerCase()===Re?(t=h.substr(Qe,6),Qe+=6):(t=v,0===on&&hn(xe));return t}())!==v?(a=xn())!==v?e=[e,n,o,a]:(Qe=r,v):(Qe=r,v):(Qe=r,v)):(Qe=r,v);r===v&&(r=null);t=r!==v?(e=pn(),e!==v?(tn=t,r=A(e)):(Qe=t,v)):(Qe=t,v);on--,t===v&&(r=v,0===on&&hn(d));return t}())!==v?n=[n,o]:(Qe=e,v):(Qe=e,v))===v&&(e=null),e!==v?(tn=t,r=l(r,e)):(Qe=t,v)):(Qe=t,v);on--,t===v&&(r=v,0===on&&hn(s));return t}())!==v){for(e=[],n=Qe,(o=xn())===v&&(o=null),n=o!==v?(a=Zn())!==v?((c=xn())===v&&(c=null),c!==v?(i=gn())!==v?o=[o,a,c,i]:(Qe=n,v):(Qe=n,v)):(Qe=n,v):(Qe=n,v);n!==v;)e.push(n),n=Qe,(o=xn())===v&&(o=null),n=o!==v?(a=Zn())!==v?((c=xn())===v&&(c=null),c!==v?(i=gn())!==v?o=[o,a,c,i]:(Qe=n,v):(Qe=n,v)):(Qe=n,v):(Qe=n,v);t=e!==v?((n=Fn())===v&&(n=null),n!==v?(tn=t,r=f(r,e)):(Qe=t,v)):(Qe=t,v)}else Qe=t,t=v;on--,t===v&&(r=v,0===on&&hn(u));return t}()}function pn(){var t,r,e,n,o,a;if(on++,t=Qe,(r=In())!==v){if(e=[],(n=On())!==v)for(;n!==v;)e.push(n),n=On();else e=v;if(e!==v)if((n=function(){var t,r;h.substr(Qe,2).toLowerCase()===se?(t=h.substr(Qe,2),Qe+=2):(t=v,0===on&&hn(le));t===v&&(t=Qe,h.substr(Qe,2)===de?(r=de,Qe+=2):(r=v,0===on&&hn(he)),r!==v&&(tn=t,r=ve()),t=r);return t}())!==v){if(o=[],(a=On())!==v)for(;a!==v;)o.push(a),a=On();else o=v;t=o!==v&&(a=pn())!==v?(tn=t,r=i(r,a)):(Qe=t,v)}else Qe=t,t=v;else Qe=t,t=v}else Qe=t,t=v;return t===v&&(t=In()),on--,t===v&&(r=v,0===on&&hn(c)),t}function In(){var t,r,e,n,o,a;if(on++,t=Qe,(r=yn())!==v){if(e=[],(n=On())!==v)for(;n!==v;)e.push(n),n=On();else e=v;if(e!==v)if((n=function(){var t,r;h.substr(Qe,3).toLowerCase()===ae?(t=h.substr(Qe,3),Qe+=3):(t=v,0===on&&hn(ce));t===v&&(t=Qe,h.substr(Qe,2)===ie?(r=ie,Qe+=2):(r=v,0===on&&hn(ue)),r!==v&&(tn=t,r=fe()),t=r);return t}())!==v){if(o=[],(a=On())!==v)for(;a!==v;)o.push(a),a=On();else o=v;t=o!==v&&(a=In())!==v?(tn=t,r=I(r,a)):(Qe=t,v)}else Qe=t,t=v;else Qe=t,t=v}else Qe=t,t=v;return t===v&&(t=yn()),on--,t===v&&(r=v,0===on&&hn(p)),t}function yn(){var t,r,e,n,o;if(on++,(t=function(){var t,r,e,n;on++,t=Qe,t=(r=Ln())!==v?(n=Fn(),n!==v?((e=zn())===v&&(e=function(){var t;h.substr(Qe,2)===me?(t=me,Qe+=2):(t=v,0===on&&hn(Ce));return t}())===v&&(e=function(){var t;h.substr(Qe,2)===ge?(t=ge,Qe+=2):(t=v,0===on&&hn(Te));return t}())===v&&(e=function(){var t;62===h.charCodeAt(Qe)?(t=Tr,Qe++):(t=v,0===on&&hn(Pr));return t}())===v&&(e=function(){var t;h.substr(Qe,2)===Pe?(t=Pe,Qe+=2):(t=v,0===on&&hn(Ee));return t}())===v&&(e=function(){var t;60===h.charCodeAt(Qe)?(t=yr,Qe++):(t=v,0===on&&hn(mr));return t}()),e!==v?Fn()!==v?(n=jn())!==v?(tn=t,r=C(r,e,n)):(Qe=t,v):(Qe=t,v):(Qe=t,v)):(Qe=t,v)):(Qe=t,v);t===v&&(t=function(){var t,r,e;on++,t=Qe,t=(r=Ln())!==v?(e=xn(),e!==v?function(){var t;h.substr(Qe,2).toLowerCase()===Ke?(t=h.substr(Qe,2),Qe+=2):(t=v,0===on&&hn(Ze));return t}()!==v?xn()!==v?Gn()!==v?Fn()!==v?(e=mn())!==v?Fn()!==v?Wn()!==v?(tn=t,r=T(r,e)):(Qe=t,v):(Qe=t,v):(Qe=t,v):(Qe=t,v):(Qe=t,v):(Qe=t,v):(Qe=t,v):(Qe=t,v)):(Qe=t,v);on--,t===v&&(r=v,0===on&&hn(g));return t}())===v&&(t=function(){var t,r,e;on++,t=Qe,t=(r=Ln())!==v?(e=xn(),e!==v?function(){var t;h.substr(Qe,6).toLowerCase()===ze?(t=h.substr(Qe,6),Qe+=6):(t=v,0===on&&hn(ke));return t}()!==v?xn()!==v?Gn()!==v?Fn()!==v?(e=mn())!==v?Fn()!==v?Wn()!==v?(tn=t,r=E(r,e)):(Qe=t,v):(Qe=t,v):(Qe=t,v):(Qe=t,v):(Qe=t,v):(Qe=t,v):(Qe=t,v):(Qe=t,v)):(Qe=t,v);on--,t===v&&(r=v,0===on&&hn(P));return t}())===v&&(t=function(){var t,r,e;on++,t=Qe,t=(r=Ln())!==v?(e=xn(),e!==v?function(){var t;h.substr(Qe,4).toLowerCase()===Be?(t=h.substr(Qe,4),Qe+=4):(t=v,0===on&&hn(Ge));return t}()!==v?xn()!==v?(e=jn())!==v?(tn=t,r=N(r,e)):(Qe=t,v):(Qe=t,v):(Qe=t,v):(Qe=t,v)):(Qe=t,v);on--,t===v&&(r=v,0===on&&hn(D));return t}())===v&&(t=function(){var t,r,e;on++,t=Qe,t=(r=Ln())!==v?(e=xn(),e!==v?function(){var t;h.substr(Qe,8).toLowerCase()===We?(t=h.substr(Qe,8),Qe+=8):(t=v,0===on&&hn(Ve));return t}()!==v?xn()!==v?(e=jn())!==v?(tn=t,r=x(r,e)):(Qe=t,v):(Qe=t,v):(Qe=t,v):(Qe=t,v)):(Qe=t,v);on--,t===v&&(r=v,0===on&&hn(R));return t}())===v&&(t=function(){var t,r,e;on++,t=Qe,t=(r=Ln())!==v?(e=xn(),e!==v?function(){var t;h.substr(Qe,6).toLowerCase()===$e?(t=h.substr(Qe,6),Qe+=6):(t=v,0===on&&hn(Xe));return t}()!==v?(tn=t,r=O(r)):(Qe=t,v):(Qe=t,v)):(Qe=t,v);on--,t===v&&(r=v,0===on&&hn(F));return t}())===v&&(t=function(){var t,r,e;on++,t=Qe,t=(r=Ln())!==v?(e=xn(),e!==v?function(){var t;h.substr(Qe,10).toLowerCase()===qe?(t=h.substr(Qe,10),Qe+=10):(t=v,0===on&&hn(Je));return t}()!==v?(tn=t,r=L(r)):(Qe=t,v):(Qe=t,v)):(Qe=t,v);on--,t===v&&(r=v,0===on&&hn(M));return t}());on--,t===v&&(r=v,0===on&&hn(m));return t}())===v)if(t=Qe,Gn()!==v){for(r=[],e=On();e!==v;)r.push(e),e=On();if(r!==v)if((e=pn())!==v){for(n=[],o=On();o!==v;)n.push(o),o=On();t=n!==v&&(o=Wn())!==v?(tn=t,y(e)):(Qe=t,v)}else Qe=t,t=v;else Qe=t,t=v}else Qe=t,t=v;return on--,t===v&&(0===on&&hn(a)),t}function mn(){var t,r,e,n;if(on++,t=Qe,(r=jn())!==v){for(e=[],n=Cn();n!==v;)e.push(n),n=Cn();t=e!==v?(tn=t,r=_(r,e)):(Qe=t,v)}else Qe=t,t=v;return on--,t===v&&(r=v,0===on&&hn(o)),t}function Cn(){var t,r,e;return on++,t=Qe,t=Fn()!==v?(44===h.charCodeAt(Qe)?(r=b,Qe++):(r=v,0===on&&hn(w)),r!==v&&Fn()!==v&&(e=jn())!==v?(tn=t,S(e)):(Qe=t,v)):(Qe=t,v),on--,t===v&&(0===on&&hn(n)),t}function gn(){var t;return on++,(t=function(){var t,r,e,n,o,a,c,i,u,f,s,l;if(on++,t=Qe,Fn()!==v)if(function(){var t;h.substr(Qe,8).toLowerCase()===Ue?(t=h.substr(Qe,8),Qe+=8):(t=v,0===on&&hn(Ye));return t}()!==v)if(xn()!==v)if((r=Mn())!==v)if(xn()!==v)if(h.substr(Qe,5).toLowerCase()===q?(e=h.substr(Qe,5),Qe+=5):(e=v,0===on&&hn(J)),e!==v)if(Fn()!==v)if(zn()!==v)if(Fn()!==v)if((e=_n())!==v){for(n=[],o=Qe,a=xn(),o=a!==v?(h.substr(Qe,3).toLowerCase()===Q?(c=h.substr(Qe,3),Qe+=3):(c=v,0===on&&hn(tt)),c!==v?(i=Fn())!==v?(u=zn())!==v?(f=Fn())!==v?(s=_n())!==v?(l=Fn())!==v?a=[a,c,i,u,f,s,l]:(Qe=o,v):(Qe=o,v):(Qe=o,v):(Qe=o,v):(Qe=o,v):(Qe=o,v)):(Qe=o,v);o!==v;)n.push(o),o=Qe,a=xn(),o=a!==v?(h.substr(Qe,3).toLowerCase()===Q?(c=h.substr(Qe,3),Qe+=3):(c=v,0===on&&hn(tt)),c!==v?(i=Fn())!==v?(u=zn())!==v?(f=Fn())!==v?(s=_n())!==v?(l=Fn())!==v?a=[a,c,i,u,f,s,l]:(Qe=o,v):(Qe=o,v):(Qe=o,v):(Qe=o,v):(Qe=o,v):(Qe=o,v)):(Qe=o,v);t=n!==v?(tn=t,rt(r,e,n)):(Qe=t,v)}else Qe=t,t=v;else Qe=t,t=v;else Qe=t,t=v;else Qe=t,t=v;else Qe=t,t=v;else Qe=t,t=v;else Qe=t,t=v;else Qe=t,t=v;else Qe=t,t=v;else Qe=t,t=v;on--,t===v&&(0===on&&hn(X));return t}())===v&&(t=function(){var t,r,e,n,o;if(on++,t=Qe,Fn()!==v)if(function(){var t;h.substr(Qe,4).toLowerCase()===je?(t=h.substr(Qe,4),Qe+=4):(t=v,0===on&&hn(He));return t}()!==v)if(xn()!==v)if((r=kn())===v&&(r=Bn()),r===v&&(r=null),r!==v)if((e=Mn())!==v){for(n=[],o=En();o!==v;)n.push(o),o=En();t=n!==v?(tn=t,W(r,e,n)):(Qe=t,v)}else Qe=t,t=v;else Qe=t,t=v;else Qe=t,t=v;else Qe=t,t=v;else Qe=t,t=v;on--,t===v&&(0===on&&hn(G));return t}())===v&&(t=function(){var t,r,e,n;if(on++,t=Qe,Fn()!==v)if(function(){var t;h.substr(Qe,6).toLowerCase()===Fe?(t=h.substr(Qe,6),Qe+=6):(t=v,0===on&&hn(Oe));return t}()!==v)if(xn()!==v)if((r=Tn())!==v){for(e=[],n=Pn();n!==v;)e.push(n),n=Pn();t=e!==v?(tn=t,U(r,e)):(Qe=t,v)}else Qe=t,t=v;else Qe=t,t=v;else Qe=t,t=v;else Qe=t,t=v;on--,t===v&&(0===on&&hn(H));return t}())===v&&(t=function(){var t,r;on++,t=Qe,t=Fn()!==v?(r=function(){var t;h.substr(Qe,4).toLowerCase()===Me?(t=h.substr(Qe,4),Qe+=4):(t=v,0===on&&hn(Le));return t}(),r!==v?xn()!==v?(r=Kn())!==v?(tn=t,B(r)):(Qe=t,v):(Qe=t,v):(Qe=t,v)):(Qe=t,v);on--,t===v&&(0===on&&hn(k));return t}()),on--,t===v&&(0===on&&hn(j)),t}function Tn(){var t,r,e,n,o;return on++,t=Qe,(r=xn())===v&&(r=null),t=r!==v?((e=kn())===v&&(e=Bn()),e===v&&(e=null),e!==v?((n=xn())===v&&(n=null),n!==v&&(o=Mn())!==v?(tn=t,r=K(e,o)):(Qe=t,v)):(Qe=t,v)):(Qe=t,v),on--,t===v&&(r=v,0===on&&hn(Y)),t}function Pn(){var t,r,e;return on++,t=Qe,t=Fn()!==v?(44===h.charCodeAt(Qe)?(r=b,Qe++):(r=v,0===on&&hn(w)),r!==v&&Fn()!==v&&(e=Tn())!==v?(tn=t,z(e)):(Qe=t,v)):(Qe=t,v),on--,t===v&&(0===on&&hn(Z)),t}function En(){var t,r,e;return on++,t=Qe,t=Fn()!==v?(44===h.charCodeAt(Qe)?(r=b,Qe++):(r=v,0===on&&hn(w)),r!==v&&Fn()!==v?((r=kn())===v&&(r=Bn()),r===v&&(r=null),r!==v&&(e=Mn())!==v?(tn=t,$(r,e)):(Qe=t,v)):(Qe=t,v)):(Qe=t,v),on--,t===v&&(0===on&&hn(V)),t}function _n(){var t,r,e,n;return on++,(t=Sn())===v&&(t=bn())===v&&(t=wn())===v&&(t=Qe,34===h.charCodeAt(Qe)?(r=nt,Qe++):(r=v,0===on&&hn(ot)),(t=r!==v?((e=Dn())===v&&(e=Nn())===v&&(e=bn())===v&&(e=wn())===v&&(e=Sn()),e!==v?(34===h.charCodeAt(Qe)?(n=nt,Qe++):(n=v,0===on&&hn(ot)),n!==v?(tn=t,r=at(e)):(Qe=t,v)):(Qe=t,v)):(Qe=t,v))===v&&(t=Qe,39===h.charCodeAt(Qe)?(r=ct,Qe++):(r=v,0===on&&hn(it)),t=r!==v?((e=Dn())===v&&(e=Nn())===v&&(e=bn())===v&&(e=wn())===v&&(e=Sn()),e!==v?(39===h.charCodeAt(Qe)?(n=ct,Qe++):(n=v,0===on&&hn(it)),n!==v?(tn=t,r=at(e)):(Qe=t,v)):(Qe=t,v)):(Qe=t,v))),on--,t===v&&(r=v,0===on&&hn(et)),t}function bn(){var t,r,e,n;return on++,t=Qe,h.substr(Qe,4)===ft?(r=ft,Qe+=4):(r=v,0===on&&hn(st)),t=r!==v&&(e=Kn())!==v&&(n=function(){var t,r;on++,t=Qe,121===h.charCodeAt(Qe)?(r=It,Qe++):(r=v,0===on&&hn(yt));r===v&&(77===h.charCodeAt(Qe)?(r=mt,Qe++):(r=v,0===on&&hn(Ct)),r===v&&(119===h.charCodeAt(Qe)?(r=gt,Qe++):(r=v,0===on&&hn(Tt)),r===v&&(100===h.charCodeAt(Qe)?(r=Pt,Qe++):(r=v,0===on&&hn(Et)),r===v&&(104===h.charCodeAt(Qe)?(r=_t,Qe++):(r=v,0===on&&hn(bt)),r===v&&(72===h.charCodeAt(Qe)?(r=wt,Qe++):(r=v,0===on&&hn(St)),r===v&&(109===h.charCodeAt(Qe)?(r=Dt,Qe++):(r=v,0===on&&hn(Nt)),r===v&&(115===h.charCodeAt(Qe)?(r=Rt,Qe++):(r=v,0===on&&hn(xt)))))))));r!==v&&(tn=t,r=Ft());on--,(t=r)===v&&(r=v,0===on&&hn(pt));return t}())!==v?(tn=t,r=lt(e,n)):(Qe=t,v),on--,t===v&&(r=v,0===on&&hn(ut)),t}function wn(){var t,r;return on++,t=Qe,h.substr(Qe,3)===ht?(r=ht,Qe+=3):(r=v,0===on&&hn(vt)),r!==v&&(tn=t,r=At()),on--,(t=r)===v&&(r=v,0===on&&hn(dt)),t}function Sn(){var t,r;return on++,t=Qe,(r=Kn())!==v&&(tn=t,r=Mt(r)),on--,(t=r)===v&&(r=v,0===on&&hn(Ot)),t}function Dn(){var t,r,e,n,o,a,c,i,u,f,s,l,d;return on++,t=Qe,t=(r=Rn())!==v?(45===h.charCodeAt(Qe)?(e=jt,Qe++):(e=v,0===on&&hn(Ht)),e!==v&&(n=Rn())!==v?(45===h.charCodeAt(Qe)?(o=jt,Qe++):(o=v,0===on&&hn(Ht)),o!==v&&(a=Rn())!==v?(84===h.charCodeAt(Qe)?(c=Ut,Qe++):(c=v,0===on&&hn(Yt)),c!==v&&(i=Rn())!==v?(58===h.charCodeAt(Qe)?(u=Kt,Qe++):(u=v,0===on&&hn(Zt)),u!==v&&(f=Rn())!==v?(58===h.charCodeAt(Qe)?(s=Kt,Qe++):(s=v,0===on&&hn(Zt)),s!==v&&(l=Rn())!==v&&(d=function(){var t,r,e,n;on++,t=Qe,43===h.charCodeAt(Qe)?(r=qt,Qe++):(r=v,0===on&&hn(Jt));r===v&&(45===h.charCodeAt(Qe)?(r=jt,Qe++):(r=v,0===on&&hn(Ht)));if(r!==v){if(e=[],Wt.test(h.charAt(Qe))?(n=h.charAt(Qe),Qe++):(n=v,0===on&&hn(Vt)),n!==v)for(;n!==v;)e.push(n),Wt.test(h.charAt(Qe))?(n=h.charAt(Qe),Qe++):(n=v,0===on&&hn(Vt));else e=v;t=e!==v?(h.substr(Qe,2)===Qt?(n=Qt,Qe+=2):(n=v,0===on&&hn(tr)),n===v&&(h.substr(Qe,3)===rr?(n=rr,Qe+=3):(n=v,0===on&&hn(er))),n===v&&(n=null),n!==v?(tn=t,r=nr(r,e,n)):(Qe=t,v)):(Qe=t,v)}else Qe=t,t=v;on--,t===v&&(r=v,0===on&&hn(Xt));return t}())!==v?(tn=t,r=zt(r,n,a,i,f,l,d)):(Qe=t,v)):(Qe=t,v)):(Qe=t,v)):(Qe=t,v)):(Qe=t,v)):(Qe=t,v),on--,t===v&&(r=v,0===on&&hn(Lt)),t}function Nn(){var t,r,e,n,o,a,c,i,u,f,s;return on++,t=Qe,t=(r=Rn())!==v?(45===h.charCodeAt(Qe)?(e=jt,Qe++):(e=v,0===on&&hn(Ht)),e!==v&&(n=Rn())!==v?(45===h.charCodeAt(Qe)?(o=jt,Qe++):(o=v,0===on&&hn(Ht)),o!==v&&(a=Rn())!==v&&xn()!==v&&(c=Rn())!==v?(58===h.charCodeAt(Qe)?(i=Kt,Qe++):(i=v,0===on&&hn(Zt)),i!==v&&(u=Rn())!==v?(58===h.charCodeAt(Qe)?(f=Kt,Qe++):(f=v,0===on&&hn(Zt)),f!==v&&(s=Rn())!==v?(tn=t,r=Bt(r,n,a,c,u,s)):(Qe=t,v)):(Qe=t,v)):(Qe=t,v)):(Qe=t,v)):(Qe=t,v),on--,t===v&&(r=v,0===on&&hn(kt)),t}function Rn(){var t,r,e;if(on++,t=Qe,r=[],Wt.test(h.charAt(Qe))?(e=h.charAt(Qe),Qe++):(e=v,0===on&&hn(Vt)),e!==v)for(;e!==v;)r.push(e),Wt.test(h.charAt(Qe))?(e=h.charAt(Qe),Qe++):(e=v,0===on&&hn(Vt));else r=v;return r!==v&&(tn=t,r=$t(r)),on--,(t=r)===v&&(r=v,0===on&&hn(Gt)),t}function xn(){var t,r=[];if(or.test(h.charAt(Qe))?(t=h.charAt(Qe),Qe++):(t=v,0===on&&hn(ar)),t!==v)for(;t!==v;)r.push(t),or.test(h.charAt(Qe))?(t=h.charAt(Qe),Qe++):(t=v,0===on&&hn(ar));else r=v;return r}function Fn(){var t,r=[];for(or.test(h.charAt(Qe))?(t=h.charAt(Qe),Qe++):(t=v,0===on&&hn(ar));t!==v;)r.push(t),or.test(h.charAt(Qe))?(t=h.charAt(Qe),Qe++):(t=v,0===on&&hn(ar));return r}function On(){var t;return cr.test(h.charAt(Qe))?(t=h.charAt(Qe),Qe++):(t=v,0===on&&hn(ir)),t}function Mn(){var t,r,e;if(on++,t=Qe,r=[],dr.test(h.charAt(Qe))?(e=h.charAt(Qe),Qe++):(e=v,0===on&&hn(hr)),e!==v)for(;e!==v;)r.push(e),dr.test(h.charAt(Qe))?(e=h.charAt(Qe),Qe++):(e=v,0===on&&hn(hr));else r=v;return r!==v&&(tn=t,r=vr(r)),on--,(t=r)===v&&(r=v,0===on&&hn(lr)),t}function Ln(){var t,r,e;if(on++,t=Qe,r=[],dr.test(h.charAt(Qe))?(e=h.charAt(Qe),Qe++):(e=v,0===on&&hn(hr)),e!==v)for(;e!==v;)r.push(e),dr.test(h.charAt(Qe))?(e=h.charAt(Qe),Qe++):(e=v,0===on&&hn(hr));else r=v;return t=r!==v?((e=function(){var t,r,e,n,o;on++,t=Qe,60===h.charCodeAt(Qe)?(r=yr,Qe++):(r=v,0===on&&hn(mr));if(r!==v){if(e=[],Cr.test(h.charAt(Qe))?(n=h.charAt(Qe),Qe++):(n=v,0===on&&hn(gr)),n!==v)for(;n!==v;)e.push(n),Cr.test(h.charAt(Qe))?(n=h.charAt(Qe),Qe++):(n=v,0===on&&hn(gr));else e=v;t=e!==v?((n=function(){var t,r,e,n;on++,t=Qe,60===h.charCodeAt(Qe)?(r=yr,Qe++):(r=v,0===on&&hn(mr));if(r!==v){if(e=[],br.test(h.charAt(Qe))?(n=h.charAt(Qe),Qe++):(n=v,0===on&&hn(wr)),n!==v)for(;n!==v;)e.push(n),br.test(h.charAt(Qe))?(n=h.charAt(Qe),Qe++):(n=v,0===on&&hn(wr));else e=v;t=e!==v?(62===h.charCodeAt(Qe)?(n=Tr,Qe++):(n=v,0===on&&hn(Pr)),n!==v?(tn=t,r=Sr(e)):(Qe=t,v)):(Qe=t,v)}else Qe=t,t=v;on--,t===v&&(r=v,0===on&&hn(_r));return t}())===v&&(n=null),n!==v?(62===h.charCodeAt(Qe)?(o=Tr,Qe++):(o=v,0===on&&hn(Pr)),o!==v?(tn=t,r=Er(e,n)):(Qe=t,v)):(Qe=t,v)):(Qe=t,v)}else Qe=t,t=v;on--,t===v&&(r=v,0===on&&hn(Ir));return t}())===v&&(e=null),e!==v?(tn=t,r=pr(r,e)):(Qe=t,v)):(Qe=t,v),on--,t===v&&(r=v,0===on&&hn(Ar)),t}function jn(){var t,r,e,n;if(on++,(t=function(){var t,r,e,n;if(on++,r=t=Qe,e=[],Nr.test(h.charAt(Qe))?(n=h.charAt(Qe),Qe++):(n=v,0===on&&hn(Rr)),n!==v)for(;n!==v;)e.push(n),Nr.test(h.charAt(Qe))?(n=h.charAt(Qe),Qe++):(n=v,0===on&&hn(Rr));else e=v;return(r=e!==v?h.substring(r,Qe):e)!==v&&(tn=t,r=xr(r)),on--,(t=r)===v&&(r=v,0===on&&hn(Dr)),t}())===v){if(t=Qe,34===h.charCodeAt(Qe)?(r=nt,Qe++):(r=v,0===on&&hn(ot)),r!==v){for(e=[],n=Hn();n!==v;)e.push(n),n=Hn();t=e!==v?(34===h.charCodeAt(Qe)?(n=nt,Qe++):(n=v,0===on&&hn(ot)),n!==v?(tn=t,r=Or(e)):(Qe=t,v)):(Qe=t,v)}else Qe=t,t=v;if(t===v)if(t=Qe,39===h.charCodeAt(Qe)?(r=ct,Qe++):(r=v,0===on&&hn(it)),r!==v){for(e=[],n=Un();n!==v;)e.push(n),n=Un();t=e!==v?(39===h.charCodeAt(Qe)?(n=ct,Qe++):(n=v,0===on&&hn(it)),n!==v?(tn=t,r=Or(e)):(Qe=t,v)):(Qe=t,v)}else Qe=t,t=v}return on--,t===v&&(r=v,0===on&&hn(Fr)),t}function Hn(){var t,r=Qe,e=Qe;return on++,34===h.charCodeAt(Qe)?(t=nt,Qe++):(t=v,0===on&&hn(ot)),t===v&&(92===h.charCodeAt(Qe)?(t=Mr,Qe++):(t=v,0===on&&hn(Lr))),on--,(r=(e=t===v?void 0:(Qe=e,v))!==v?(h.length>Qe?(t=h.charAt(Qe),Qe++):(t=v,0===on&&hn(jr)),t!==v?(tn=r,e=Hr(t)):(Qe=r,v)):(Qe=r,v))===v&&(r=Qe,92===h.charCodeAt(Qe)?(e=Mr,Qe++):(e=v,0===on&&hn(Lr)),r=e!==v&&(t=Yn())!==v?(tn=r,e=Ur(t)):(Qe=r,v)),r}function Un(){var t,r=Qe,e=Qe;return on++,39===h.charCodeAt(Qe)?(t=ct,Qe++):(t=v,0===on&&hn(it)),t===v&&(92===h.charCodeAt(Qe)?(t=Mr,Qe++):(t=v,0===on&&hn(Lr))),on--,(r=(e=t===v?void 0:(Qe=e,v))!==v?(h.length>Qe?(t=h.charAt(Qe),Qe++):(t=v,0===on&&hn(jr)),t!==v?(tn=r,e=Hr(t)):(Qe=r,v)):(Qe=r,v))===v&&(r=Qe,92===h.charCodeAt(Qe)?(e=Mr,Qe++):(e=v,0===on&&hn(Lr)),r=e!==v&&(t=Yn())!==v?(tn=r,e=Ur(t)):(Qe=r,v)),r}function Yn(){var t,r;return 39===h.charCodeAt(Qe)?(t=ct,Qe++):(t=v,0===on&&hn(it)),t===v&&(34===h.charCodeAt(Qe)?(t=nt,Qe++):(t=v,0===on&&hn(ot)),t===v&&(92===h.charCodeAt(Qe)?(t=Mr,Qe++):(t=v,0===on&&hn(Lr)),t===v&&(t=Qe,98===h.charCodeAt(Qe)?(r=Yr,Qe++):(r=v,0===on&&hn(Kr)),r!==v&&(tn=t,r=Zr()),(t=r)===v&&(t=Qe,102===h.charCodeAt(Qe)?(r=zr,Qe++):(r=v,0===on&&hn(kr)),r!==v&&(tn=t,r=Br()),(t=r)===v&&(t=Qe,110===h.charCodeAt(Qe)?(r=Gr,Qe++):(r=v,0===on&&hn(Wr)),r!==v&&(tn=t,r=Vr()),(t=r)===v&&(t=Qe,114===h.charCodeAt(Qe)?(r=$r,Qe++):(r=v,0===on&&hn(Xr)),r!==v&&(tn=t,r=qr()),(t=r)===v&&(t=Qe,116===h.charCodeAt(Qe)?(r=Jr,Qe++):(r=v,0===on&&hn(Qr)),r!==v&&(tn=t,r=te()),(t=r)===v&&(t=Qe,118===h.charCodeAt(Qe)?(r=re,Qe++):(r=v,0===on&&hn(ee)),r!==v&&(tn=t,r=ne()),t=r)))))))),t}function Kn(){var t,r=Qe,e=[];if(Wt.test(h.charAt(Qe))?(t=h.charAt(Qe),Qe++):(t=v,0===on&&hn(Vt)),t!==v)for(;t!==v;)e.push(t),Wt.test(h.charAt(Qe))?(t=h.charAt(Qe),Qe++):(t=v,0===on&&hn(Vt));else e=v;return e!==v&&(tn=r,e=oe(e)),r=e}function Zn(){var t;return 124===h.charCodeAt(Qe)?(t=Ae,Qe++):(t=v,0===on&&hn(pe)),t}function zn(){var t;return 61===h.charCodeAt(Qe)?(t=Ie,Qe++):(t=v,0===on&&hn(ye)),t}function kn(){var t;return 43===h.charCodeAt(Qe)?(t=qt,Qe++):(t=v,0===on&&hn(Jt)),t}function Bn(){var t;return 45===h.charCodeAt(Qe)?(t=jt,Qe++):(t=v,0===on&&hn(Ht)),t}function Gn(){var t;return 40===h.charCodeAt(Qe)?(t=_e,Qe++):(t=v,0===on&&hn(be)),t}function Wn(){var t;return 41===h.charCodeAt(Qe)?(t=we,Qe++):(t=v,0===on&&hn(Se)),t}var Vn="AND",$n="OR",Xn="+",qn=":param_",Jn=["IP","IPv4","IPv6","Array","Array<IPv4>","Array<CIDR_IPv4>","Array<IPv6>","Array<CIDR_IPv6>","Map"],Qn=72e5,to=/^(25[0-5]|2[0-4]\d|[0-1]\d{2}|[1-9]?\d)\.(25[0-5]|2[0-4]\d|[0-1]\d{2}|[1-9]?\d)\.(25[0-5]|2[0-4]\d|[0-1]\d{2}|[1-9]?\d)\.(25[0-5]|2[0-4]\d|[0-1]\d{2}|[1-9]?\d)$/,ro=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,eo=[],no={},oo={},ao=(new Date).getTime();function co(t,r){if(!t||-1===t.indexOf("/"))return!1;var e=t.split("/");if(2!==e.length)return!1;t=_slicedToArray(e,2),e=t[0],t=t[1];if(!e||isNaN(+t))return!1;t=+t;return"IPv4"===r?!!(to.test(e)&&0<t&&t<=32):"IPv6"===r&&!!(ro.test(e)&&0<t&&t<=128)}function io(t){return+t<10?"0".concat(t):t}function uo(t){var r=new Date(t||new Date),e=r.getUTCFullYear(),n=r.getUTCMonth()+1,o=r.getUTCDate(),a=r.getUTCHours(),t=r.getUTCMinutes(),r=r.getUTCSeconds();return e+"-"+io(n)+"-"+io(o)+" "+io(a)+":"+io(t)+":"+io(r)}function fo(t,r){var e=cn(),n=e.start,e=e.end,n=qn+n.line+"_"+n.offset+"_"+e.line+"_"+e.offset,e=n;return"IPv4"===r&&(e="toIPv4(".concat(n,")")),"IPv6"===r&&(e="toIPv6(".concat(n,")")),"Array"===r&&(e="has(".concat(t,", ").concat(n,")=1")),"Array<IPv4>"===r&&(e="has(".concat(t,", toIPv4(").concat(n,"))=1")),"Array<IPv6>"===r&&(e="has(".concat(t,", toIPv6(").concat(n,"))=1")),{paramKey:n,paramName:e}}function so(t,r){oo.hasOwnProperty(t)||(oo[t.replace(":","")]=r)}function lo(t,r,e,n){var o="".concat(t,"_").concat(r||"","_").concat(e,"_").concat(n);no[o]||(no[o]={field:t,fieldType:r,operator:e,operand:n})}var ho=void 0!==(r=t.json)&&r,vo=void 0===(r=t.hasAgingTime)||r,Ao=void 0===(r=t.timePrecision)?9:r,po=void 0===(r=t.includeStartTime)||r,Io=void 0===(t=t.includeEndTime)||t;if((e=e())!==v&&Qe===h.length)return e;throw e!==v&&Qe<h.length&&hn({type:"end"}),vn(nn,en<h.length?h.charAt(en):null,en<h.length?dn(en,en+1):dn(en,en))}}});
